# ─── ZSH ENVIRONMENT CONFIGURATION ─────────────────────────────────────────────

# This file is sourced for all ZSH shells (interactive and non-interactive)
# It runs first, before any other ZSH configuration files
# Uses native ZSH features for maximum performance and reliability

# ─── PATH CONFIGURATION ───────────────────────────────────────────────────────

# Use ZSH native path array for automatic deduplication and better performance
typeset -U path
typeset -U manpath

# Define default paths using ZSH arrays
local default_paths=(
    "/usr/local/bin"
    "/usr/local/sbin" 
    "/usr/bin"
    "/usr/sbin"
    "/bin"
    "/sbin"
)

# Add default paths to path array (ZSH handles deduplication automatically)
path=($default_paths $path)

# ─── ENVIRONMENT VARIABLES ───────────────────────────────────────────────────

# Set default locale and editor using ZSH native features
[[ -z "$LANG" ]] && export LANG="en_US.UTF-8"

# Smart editor detection using ZSH array and command substitution
if [[ -z "$EDITOR" ]]; then
    local editors=("vim" "nano" "vi")
    for editor in $editors; do
        if (( $+commands[$editor] )); then
            export EDITOR="$editor"
            export VISUAL="$editor"
            break
        fi
    done
fi

# ─── SECURITY SETTINGS ───────────────────────────────────────────────────────

# Set umask if not already set
[[ -z "$UMASK" ]] && umask 022

# ─── ZSH SPECIFIC OPTIMIZATIONS ──────────────────────────────────────────────

# Enable ZSH specific features for better performance
setopt AUTO_CD              # Auto-cd into directories
setopt EXTENDED_GLOB        # Extended globbing
setopt NO_CASE_GLOB         # Case-insensitive globbing
setopt NUMERIC_GLOB_SORT    # Sort numeric filenames correctly

# ─── PERFORMANCE OPTIMIZATIONS ───────────────────────────────────────────────

# Optimize ZSH startup and performance
autoload -U compinit
compinit -d ~/.zcompdump

# Enable completion caching
zstyle ':completion:*' use-cache on
zstyle ':completion:*' cache-path ~/.zsh/cache


